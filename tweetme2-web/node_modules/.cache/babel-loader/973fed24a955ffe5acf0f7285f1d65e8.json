{"ast":null,"code":"import _toConsumableArray from\"/home/geoffreymeier/Documents/school/2020-21/cs481/tweetme2/tweetme2-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/geoffreymeier/Documents/school/2020-21/cs481/tweetme2/tweetme2-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{loadTweets}from'../lookup';export function TweetsComponent(props){var textAreaRef=React.createRef();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),newTweets=_useState2[0],setNewTweets=_useState2[1];var handleSubmit=function handleSubmit(event){event.preventDefault();var newVal=textAreaRef.current.value;var tempNewTweets=_toConsumableArray(newTweets);tempNewTweets.unshift({content:newVal,likes:0,id:12313});setNewTweets(tempNewTweets);textAreaRef.current.value='';};return/*#__PURE__*/React.createElement(\"div\",{className:props.className},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 mb-3\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(\"textarea\",{ref:textAreaRef,required:true,className:\"form-control\",name:\"tweet\"}),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-primary my-3\"},\"Tweet\"))),/*#__PURE__*/React.createElement(TweetsList,{newTweets:newTweets}));}export function ActionBtn(props){var tweet=props.tweet,action=props.action;var _useState3=useState(tweet.likes?tweet.likes:0),_useState4=_slicedToArray(_useState3,2),likes=_useState4[0],setLikes=_useState4[1];var _useState5=useState(tweet.userLike?true:false),_useState6=_slicedToArray(_useState5,2),userLike=_useState6[0],setUserLike=_useState6[1];var className=props.className?props.className:'btn btn-primary btn-sm';var actionDisplay=action.display?action.display:'Action';var handeClick=function handeClick(event){event.preventDefault();if(action.type==='like'){if(userLike===true){// unlike\nsetLikes(likes-1);setUserLike(false);}else{//like \nsetLikes(likes+1);setUserLike(true);}}};var display=action.type==='like'?\"\".concat(likes,\" \").concat(actionDisplay):actionDisplay;return/*#__PURE__*/React.createElement(\"button\",{className:className,onClick:handeClick},display);}export function Tweet(props){var tweet=props.tweet;var className=props.className?props.className:'col-10 mx-auto col-md-6';return/*#__PURE__*/React.createElement(\"div\",{className:className},/*#__PURE__*/React.createElement(\"p\",null,tweet.id,\" - \",tweet.content),/*#__PURE__*/React.createElement(\"div\",{className:\"btn btn-group\"},/*#__PURE__*/React.createElement(ActionBtn,{tweet:tweet,action:{type:'like',display:\"Likes\"}}),/*#__PURE__*/React.createElement(ActionBtn,{tweet:tweet,action:{type:\"unlike\",display:\"Unlike\"}}),/*#__PURE__*/React.createElement(ActionBtn,{tweet:tweet,action:{type:\"retweet\",display:\"Retweet\"}})));}export function TweetsList(props){var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),tweetsInit=_useState8[0],setTweetsInit=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),tweets=_useState10[0],setTweets=_useState10[1];useEffect(function(){var final=_toConsumableArray(props.newTweets).concat(tweetsInit);if(final.length!==tweets.length){setTweets(final);}},[props.newTweets,tweets,tweetsInit]);useEffect(function(){//perform lookup in backend\nvar myCallback=function myCallback(response,status){if(status===200){setTweetsInit(response);}else alert(\"There was an error!\");};loadTweets(myCallback);},[]);return tweets.map(function(item,index){return/*#__PURE__*/React.createElement(Tweet,{tweet:item,className:\"my-5 py-5 border bg-white text-dark\",key:\"\".concat(index,\"-{tweet.id}\")});});}","map":{"version":3,"sources":["/home/geoffreymeier/Documents/school/2020-21/cs481/tweetme2/tweetme2-web/src/tweets/components.js"],"names":["React","useEffect","useState","loadTweets","TweetsComponent","props","textAreaRef","createRef","newTweets","setNewTweets","handleSubmit","event","preventDefault","newVal","current","value","tempNewTweets","unshift","content","likes","id","className","ActionBtn","tweet","action","setLikes","userLike","setUserLike","actionDisplay","display","handeClick","type","Tweet","TweetsList","tweetsInit","setTweetsInit","tweets","setTweets","final","concat","length","myCallback","response","status","alert","map","item","index"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { loadTweets } from '../lookup'\n\nexport function TweetsComponent(props) {\n  const textAreaRef = React.createRef()\n  const [newTweets, setNewTweets] = useState([])\n  const handleSubmit = (event) => {\n    event.preventDefault()\n    const newVal = textAreaRef.current.value\n    let tempNewTweets = [...newTweets]\n    tempNewTweets.unshift({\n      content: newVal,\n      likes: 0,\n      id: 12313\n    })\n    setNewTweets(tempNewTweets)\n    textAreaRef.current.value = ''\n  }\n\n  return <div className={props.className}>\n    <div className='col-12 mb-3'>\n      <form onSubmit={handleSubmit}>\n        <textarea ref={textAreaRef} required={true} className='form-control' name='tweet'>\n\n        </textarea>\n        <button type='submit' className='btn btn-primary my-3'>Tweet</button>\n      </form>\n    </div>\n    <TweetsList newTweets={newTweets}/>\n  </div>\n}\n\nexport function ActionBtn(props) {\n  const { tweet, action } = props\n  const [likes, setLikes] = useState(tweet.likes ? tweet.likes : 0)\n  const [userLike, setUserLike] = useState(tweet.userLike ? true : false)\n  const className = props.className ? props.className : 'btn btn-primary btn-sm'\n  const actionDisplay = action.display ? action.display : 'Action'\n\n  const handeClick = (event) => {\n    event.preventDefault()\n    if (action.type === 'like') {\n      if (userLike === true) {\n        // unlike\n        setLikes(likes - 1)\n        setUserLike(false)\n      }\n      else {\n        //like \n        setLikes(likes + 1)\n        setUserLike(true)\n      }\n    }\n  }\n\n  const display = action.type === 'like' ? `${likes} ${actionDisplay}` : actionDisplay\n\n  return <button className={className} onClick={handeClick}>{display}</button>;\n}\n\nexport function Tweet(props) {\n  const { tweet } = props\n  const className = props.className ? props.className : 'col-10 mx-auto col-md-6'\n  return <div className={className}>\n    <p>{tweet.id} - {tweet.content}</p>\n    <div className='btn btn-group'>\n      <ActionBtn tweet={tweet} action={{ type: 'like', display: \"Likes\" }} />\n      <ActionBtn tweet={tweet} action={{ type: \"unlike\", display: \"Unlike\" }} />\n      <ActionBtn tweet={tweet} action={{ type: \"retweet\", display: \"Retweet\" }} />\n    </div>\n  </div>\n}\n\nexport function TweetsList(props) {\n  const [tweetsInit, setTweetsInit] = useState([])\n  const [tweets, setTweets] = useState([])\n  useEffect(() => { \n    const final = [...props.newTweets].concat(tweetsInit)\n    if (final.length !== tweets.length) {\n      setTweets(final)      \n    }\n  }, [props.newTweets, tweets, tweetsInit])\n\n  useEffect(() => {\n    //perform lookup in backend\n    const myCallback = (response, status) => {\n      if (status === 200) {\n        setTweetsInit(response)\n      }\n      else\n        alert(\"There was an error!\")\n    }\n    loadTweets(myCallback)\n\n  }, [])\n\n  return tweets.map((item, index) => {\n    return <Tweet tweet={item} className='my-5 py-5 border bg-white text-dark' key={`${index}-{tweet.id}`} />\n  })\n}"]},"metadata":{},"sourceType":"module"}